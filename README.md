# social_network_system_design
Домашнее задание по курсу System Design:
проектирование социальной сети для путешественников.

# Функциональные требования
- публикация постов с привязкой к месту путешествия  
Каждый пост может содержать описание до 2200 символов, включая знаки препинания и пробелы,
а также до 10 фотографий размером не более 20 МБ каждая.
Место путешествия по умолчанию предлагается из метафайла фотографии,
либо можно указать вручную.
- оценка и комментарии постов других путешественников  
Оценка представляет из себя эмоджи (палец вверх, вниз, сердечко, огонь, слезы и т.д.)  
Длина комментария не более 1500 символов.
- подписка на других путешественников  
Не более 1000000 подписок и не более 1000000 подписчиков
- поиск популярных мест для путешествий и просмотр постов о них  
Получение выборки постов о местах, указанных пользователями чаще всего.
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке  
Просмотр ленты подписок, ленты пользователя - последние посты сверху.
- поддержка мобильных устройств и десктопного браузера  
Возможность работы на всех современных мобильных устройствах и десктопных браузерах

# Нефункциональные требования
- аудитория СНГ
- доступность 99,95%
- безопасность (механизм авторизации и аутентификации, стандарты хранения персональных данных  
  поддержание компонентов в актуальной версии, содержащей фикс уязвимостей)
- 10000 DAU и заложено увеличение вдвое каждый год
- удаление аккаунта пользователя со всеми постами после года неактивности
- блокировка аккаунта на 2 дня при подозрительной активности  
  Пользователь может добавлять не более 30 постов в день
- пик нагрузки приходится на июнь-август, по часам - на обед и вечернее время
- время ответа на пользовательскую операцию не более 4 сек

# Расчет нагрузки
- кол-во одновременных соединений = 10% DAU = 1000
- размеры данных  
  пост = (id, user_id, описание, геопозиция, фотографии) = 8 + 16 + 2200 + 512 + 20480 * 10 =  207536 Б = 203 КБ  
  реакция = (id, user_id, id реакции) =  8 + 16 + 8 = 32 Б  
  комментарий = (id, user_id, текст) = 8 + 16 + 1500 = 1524 Б = 1,49 КБ  
  подписка = (id, following_user_id, user_id) = 8 + 16 + 16 = 40 Б  
  лента постов = (загружается 20 постов за раз, фото загружаются не как превью, а полностью) = 20 * 203 КБ = 4060 КБ = 3,96 МБ
- добавление поста  
  Пользователь добавляет 20 постов каждые 6 мес, или 20 * 2 / 365 = 0,11 в день  
  RPS = 10000 DAU * 0,11 / 86400 = 0,01 в сек  
  трафик = 0,01 * 203 КБ = 2,03 КБ в сек
- оценка поста  
  Пользователь оценивает 50 постов в день  
  RPS = 10000 DAU * 50 / 86400 = 0,58 в сек  
  трафик = 0,58 * 32 Б = 18,56 Б в сек
- комментарий на пост  
  Пользователь комментирует 10 постов в день  
  RPS = 10000 DAU * 10 / 86400 = 1,16 в сек  
  трафик = 1,16 * 1,49 КБ = 1,73 КБ в сек
- подписка на пользователя  
  Пользователь добавляет 5 подписок в месяц, или 5 / 30 = 0,17 в день  
  RPS = 10000 DAU * 0,17 / 86400 = 0,02 в сек
  трафик = 0,02 * 40 Б = 0,8 Б в сек
- поиск популярных мест для путешествий  
  Пользователь делает поиск 1 раз в 3 месяца, или 1 / 90 = 0,01 в день и пролистывает 100 постов в результатах  
  RPS = 10000 DAU * 0,01 / 86400 = 0,001 в сек
  трафик = 0,001 * 3,96 МБ = 0,004 МБ в сек (это трафик на 20 постов)  
  ***Вопрос: но пользователь смотрит 100 постов с паузами, как это учесть в нагрузке?
- просмотр ленты  
  Пользователь пролистывает 200 постов в день  
  RPS = 10000 DAU * 200 / 86400 = 4,63 в сек
  трафик = 4,63 * 3,96 МБ = 18,33 МБ в сек (это трафик на 20 постов)  
  ***Вопрос: но пользователь смотрит 200 постов с паузами, как это учесть в нагрузке?