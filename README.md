# social_network_system_design
Домашнее задание по курсу System Design:
проектирование социальной сети для путешественников.

# Функциональные требования
- публикация постов с привязкой к месту путешествия  
Каждый пост может содержать описание до 2200 символов, включая знаки препинания и пробелы,
место путешествия, а также от 0 до 10 фотографий размером не более 20 МБ каждая.
- оценка и комментарии постов других путешественников  
Оценка представляет из себя эмоджи (палец вверх, вниз, сердечко, огонь, слезы и т.д.)  
Длина комментария не более 1500 символов.
- подписка на других путешественников  
Не более 1000000 подписок и не более 1000000 подписчиков
- поиск популярных мест для путешествий и просмотр постов о них  
Получение выборки постов о местах, указанных пользователями чаще всего.
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке  
Просмотр ленты подписок, ленты пользователя - последние посты сверху.
- поддержка мобильных устройств и десктопного браузера  
Возможность работы на всех современных мобильных устройствах и десктопных браузерах

# Нефункциональные требования
- аудитория СНГ
- доступность 99,95%
- 10000 DAU и заложено увеличение вдвое каждый год
- пользователь может добавлять не более 30 постов в день
- пик нагрузки приходится на июнь-август, по часам - на обед и вечернее время
- время ответа на пользовательскую операцию не более 4 сек

# Расчет нагрузки
- кол-во одновременных соединений = 10% DAU = 1000
- размеры данных  
  пост = (id, user_id, описание, геопозиция, массив из {id, photo}) = 8 + 8 + 2200 + 512 + (8 + 20480) * 10 =  207608 Б = 203 КБ  
  реакция = (id, user_id, id реакции) =  8 + 8 + 8 = 24 Б  
  комментарий = (id, user_id, текст) = 8 + 8 + 1500 = 1516 Б = 1,48 КБ  
  подписка = (id, following_user_id, user_id) = 8 + 8 + 8 = 24 Б  
  лента постов = (загружается 20 постов за раз, фото загружаются не как превью, а полностью) = 20 * 203 КБ = 4060 КБ = 3,96 МБ
- добавление поста  
  Пользователь добавляет 20 постов каждые 6 мес, или 20 * 2 / 365 = 0,11 в день  
  RPS = 10000 DAU * 0,11 / 86400 = 0,01 в сек  
  трафик = 0,01 * 203 КБ = 2,03 КБ в сек
- оценка поста  
  Пользователь оценивает 50 постов в день  
  RPS = 10000 DAU * 50 / 86400 = 0,58 в сек  
  трафик = 0,58 * 24 Б = 13,92 Б в сек
- комментарий на пост  
  Пользователь комментирует 10 постов в день  
  RPS = 10000 DAU * 10 / 86400 = 1,16 в сек  
  трафик = 1,16 * 1,48 КБ = 1,72 КБ в сек
- подписка на пользователя  
  Пользователь добавляет 5 подписок в месяц, или 5 / 30 = 0,17 в день  
  RPS = 10000 DAU * 0,17 / 86400 = 0,02 в сек
  трафик = 0,02 * 24 Б = 0,48 Б в сек
- поиск популярных мест для путешествий  
  Пользователь делает поиск 1 раз в 3 месяца, или 1 / 90 = 0,01 в день и пролистывает 100 постов в результатах.
  За один раз система загружает 20 постов. Таким образом, пользователь делает 0,01 * 5 = 0,05 запросов в день.
  
  RPS = 10000 DAU * 0,05 / 86400 = 0,006 в сек
  трафик = 0,006 * 3,96 МБ (это загрузка 20 постов) = 0,24 МБ в сек

- просмотр ленты  
  Пользователь пролистывает 200 постов в день, за один раз система загружает 20 постов.
  Таким образом, пользователь делает 10 запросов в день.

  RPS = 10000 DAU * 10 / 86400 = 1,16 в сек
  трафик = 1,16 * 3,96 МБ (это загрузка 20 постов) = 4,59 МБ в сек